<tool id="filter" name="Filter" version="stat_2014.11.20">
  <description>Removes elements according to numerical or qualitative values</description>
  <command interpreter="Rscript">
	filter_wrap.R
      dataMatrix_in "$dataMatrix_in"
      sampleMetadata_in "$sampleMetadata_in"
      variableMetadata_in "$variableMetadata_in"
 
	  Numeric "${numeric_condition.Factors}"
	  #if str($numeric_condition.Factors) == 'TRUE':
		#for $i in $numeric_condition.numeric_repeat:
		  num_file "${i.num_file}"
		  parm_col "${i.parm_col_num}"
		  Interval "${i.interval_condition.interval}"
		  #if str($i.interval_condition.interval) == 'lower':
		    low_value "${i.interval_condition.low_value}"
		  #end if
		  #if str($interval_condition.interval) == 'upper':
		    up_value "${i.interval_condition.up_value}"
		  #end if
		  #if str($interval_condition.interval) == 'between':
		    up_value "${i.interval_condition.up_value}"
		    low_value "${i.interval_condition.low_value}"
		  #end if
		  #if str($interval_condition.interval) == 'extremity':
		    low_value "${i.interval_condition.low_value}"
		    up_value "${i.interval_condition.up_value}"
		  #end if
		#end for
	  #end if
      
      Factors "${qualitative_condition.Factors}"
      #if str($qualitative_condition.Factors) == 'TRUE':
        #for $i in $qualitative_condition.qualitative_repeat:
		  qual_file "${i.qual_file}"
		  factor_col "${i.factor_col}"
		  factors_value "${i.factors_value}"
        #end for
      #end if
      
      dataMatrix_out "$dataMatrix_out"
      sampleMetadata_out "$sampleMetadata_out"
      variableMetadata_out "$variableMetadata_out"
  </command>
  
  <inputs>
    <param name="dataMatrix_in" type="data" label="Data Matrix file " help="" format="tabular" />
    <param name="sampleMetadata_in" type="data" label="Sample metadata file " help="" format="tabular" />
    <param name="variableMetadata_in" type="data" label="Variable metadata file " help="" format="tabular" />
    	
	<conditional name="numeric_condition">
      <param name="Factors" type="select" label="Deleting according to Numeric values  " help="">
          <option value="FALSE">no</option>
          <option value="TRUE">yes</option>
      </param>
      <when value="TRUE">
        <repeat name="numeric_repeat" title="Identify the parameter to filter " min="1">
            <param name="num_file" label="On file " type="select" display="radio" help="">
              <option value="sample">Sample metadata</option>
              <option value="variable">Variable metadata</option>
            </param>
            <param name="parm_col_num" label="Name of the column to filter " type="text" value="" help="" />
			<conditional name="interval_condition">
              <param name="interval" type="select" label="Interval of values to remove  " help="">
                <option value="lower">lower</option>
                <option value="upper">upper</option>
                <option value="between">between</option>
                <option value="extremity">extremity</option>
              </param>
			  <when value="lower">
			    <param name="low_value" type="float" label="Remove all values lower than "  optional="true" value="0" help=""/>
			  </when>
			  <when value="upper">
			    <param name="up_value" type="float" label="Remove all values upper than "  optional="true" value="0" help=""/>
			  </when>
			  <when value="between">
			    <param name="low_value" type="float" label="Remove all values between "  optional="true" value="0" help=""/>
			    <param name="up_value" type="float" label="And "  optional="true" value="1" help=""/>
			  </when>
			  <when value="extremity">
			    <param name="low_value" type="float" label="Remove all values lower than "  optional="true" value="0" help=""/>
			    <param name="up_value" type="float" label="And upper than "  optional="true" value="1" help=""/>
			  </when>
			</conditional>
        </repeat>
      </when>
    </conditional>
	
    <conditional name="qualitative_condition">
      <param name="Factors" type="select" label="Deleting according to Qualitative values  " help="">
          <option value="FALSE">no</option>
          <option value="TRUE">yes</option>
      </param>
      <when value="TRUE">
        <repeat name="qualitative_repeat" title="Identify the factor to remove " min="1">
            <param name="qual_file" label="On file " type="select" display="radio" help="">
              <option value="sample">Sample metadata</option>
              <option value="variable">Variable metadata</option>
            </param>
            <param name="factor_col" label="Name of the column to remove " type="text" value="" help="" />
            <param name="factors_value" type="text" label="Remove factor when " help="" value="" />
        </repeat>
      </when>
    </conditional>
  </inputs>
  
  <outputs>
    <data name="dataMatrix_out" label="${tool.name}_${dataMatrix_in.name}" format="tabular" ></data>
    <data name="sampleMetadata_out" label="${tool.name}_${sampleMetadata_in.name}" format="tabular" ></data>
    <data name="variableMetadata_out" label="${tool.name}_${variableMetadata_in.name}" format="tabular" ></data>
  </outputs>
  
  <help>

.. class:: infomark

**Authors** Marion Landi and Melanie Petera

---------------------------------------------------

==============
Filter
==============

-----------
Description
-----------


	</help>
</tool>